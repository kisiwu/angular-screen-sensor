"object"==typeof module&&module.exports&&(module.exports="angularScreenSensor"),function(a){"use strict";a.module("angularScreenSensor",[]),a.module("angularScreenSensor").directive("screenSensor",["sensorRemote",function(a){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,c,d){var e,f,g=c,h=g.width()+"x"+g.height(),i=[],j=function(a,c){var e=b.$eval(d[a]);"function"==typeof e&&e(c)},k=function(){i.some(function(a,c,f){var h=a.element;if(h.offset().top-g.offset().top-(b.$eval(d.paddingTop)||0)>=0)return e&&e.is(h)||(e=h,j("toppestFn",a.scope.screenPix)),!0})},l=function(){i.some(function(a,c,e){var h=a.element;a.scope;return h.offset().top-(g.offset().top+g.innerHeight())+(b.$eval(d.paddingBottom)||0)>=0?(f&&f.is(h)||(f=h,j("bottomestFn",a.scope.screenPix)),!0):c==e.length-1?(f&&f.is(h)||(f=h,j("bottomestFn",a.scope.screenPix)),!0):void 0})},m=function(){k(),l()};this.add=function(a,b){i.push({scope:a,element:b})},$(g).on("scroll",function(){m()}),$(g).resize(function(){var a=$(this).width()+"x"+$(this).height();h!==a&&(console.log("newSize"),h=a)}),a.register({event:"scan",callback:m})}]}}]),a.module("angularScreenSensor").directive("screenPix",["$timeout",function(a){return{restrict:"A",require:"^screenSensor",scope:{screenPix:"=",paddingTop:"=?",paddingBottom:"=?",toppestFn:"=?",bottomestFn:"=?"},link:function(a,b,c,d){d.add(a,b,c)}}}]),a.module("angularScreenSensor").factory("sensorRemote",["$timeout",function(b){function c(){e.forEach(function(a){"scan"!=a.event&&a.event!=f||a.callback()})}function d(b){b&&(a.isObject(b)||(b={callback:b}),"function"==typeof b.callback&&(b.event&&a.isString(b.event)||(b.event=f),e.push(b)))}var e=[];const f="all";return{register:d,scan:c}}])}(angular);